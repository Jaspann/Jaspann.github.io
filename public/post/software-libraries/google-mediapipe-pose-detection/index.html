<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage" data-theme="light">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>
    
    Mediapipe Pose Detection: Flutter Library - William Parker&#39;s Personal Site
    </title>
  


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />


<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />


<meta name="applicable-device" content="pc,mobile">
<meta name="color-scheme" content="light dark" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">


<meta name="generator" content="Hugo 0.144.1" />


<link rel="canonical" href="http://localhost:1313/post/software-libraries/google-mediapipe-pose-detection/" />




<meta name="author" content="William Parker" /><meta name="description" content="A Flutter library for pose detection using Google&#39;s Mediapipe." />





  






<meta name="keywords" content="Kotlin, Swift, iOS, Android, Flutter, Mobile, Library, Pose Detection, Mediapipe" />


<meta property="og:url" content="http://localhost:1313/post/software-libraries/google-mediapipe-pose-detection/">
  <meta property="og:site_name" content="William Parker&#39;s Personal Site">
  <meta property="og:title" content="Mediapipe Pose Detection: Flutter Library">
  <meta property="og:description" content="A Flutter library for pose detection using Google&#39;s Mediapipe.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-03-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-02-19T00:00:00+00:00">
    <meta property="article:tag" content="Kotlin">
    <meta property="article:tag" content="Swift">
    <meta property="article:tag" content="IOS">
    <meta property="article:tag" content="Android">
    <meta property="article:tag" content="Flutter">
    <meta property="article:tag" content="Mobile">

  <meta itemprop="name" content="Mediapipe Pose Detection: Flutter Library">
  <meta itemprop="description" content="A Flutter library for pose detection using Google&#39;s Mediapipe.">
  <meta itemprop="datePublished" content="2024-03-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-02-19T00:00:00+00:00">
  <meta itemprop="wordCount" content="1794">
  <meta itemprop="keywords" content="Kotlin,Swift,IOS,Android,Flutter,Mobile,Library,Pose Detection,Mediapipe">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Mediapipe Pose Detection: Flutter Library">
  <meta name="twitter:description" content="A Flutter library for pose detection using Google&#39;s Mediapipe.">

<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/css/style.min.efc57c788c2e17f2049ed15c233ee485d769f803158dbc40eb60149174d84dc0.css" integrity="sha256-78V8eIwuF/IEntFcIz7khddp&#43;AMVjbxA62AUkXTYTcA=" media="screen"
  crossorigin="anonymous">





<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->





<script>
  (function () {
    var savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
  })();
</script>


<link rel="stylesheet" href="/css/image.css">

</head>

<body>
  <div id="back-to-top"></div>

  <header class="site-header">
    
<div class="desktop-header">
  <div class="desktop-header-logo">
    <a href="/" class="logo">
      
      William Parker&#39;s Personal Site
      
    </a>
  </div>

  <nav class="desktop-navbar">
    <ul id="menu" class="menu">
      
      
      <li class="menu-item">
        
        
        
        <a class="menu-item-link" href="http://localhost:1313/about/">About</a>
        

        

      </li>
      

      
      

      

      <li class="menu-item">
        <a class="theme-toggle menu-item-link" href="javascript:void(0);">

          
<svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>

          
<svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>

        </a>
      </li>

      <li class="menu-item">
        <a class="menu-item-link" href="https://github.com/Jaspann" rel="noopener alternate"
          title="GitHub" target="_blank">
          
<svg aria-hidden="true" class="icon hi-svg-inline icon--rss" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

        </a>
        
      </li>
    </ul>
  </nav>
</div>

    

<div class="mobile-header">
  <div id="mobile-navbar" class="mobile-navbar">
    <div id="mobile-navbar-icon" class="mobile-navbar-icon">
      
<svg aria-hidden="true" class="lucide lucide-menu hi-svg-inline icon--menu" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
    </div>
    <div class="mobile-navbar-logo">
      <a href="/" class="logo">William Parker&#39;s Personal Site</a>
    </div>
  </div>

  <div id="mobile-menu-close-modal" class="mobile-menu-close-modal"></div>
  <nav id="mobile-menu" class="mobile-menu">
    <ul class="mobile-menu-list">
      <li class="mobile-menu-item">
        
        
        
        <a class="menu-item-link" href="http://localhost:1313/about/">About</a>
        
        
      </li>
      

      

      <li class="mobile-menu-item">
        <a class="theme-toggle menu-item-link" href="javascript:void(0);">

          
<svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>

          
<svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>

        </a>
      </li>

      <li class="mobile-menu-item">
        <a class="menu-item-link" href="https://github.com/Jaspann" rel="noopener alternate"
          title="GitHub" target="_blank">
          
<svg aria-hidden="true" class="icon hi-svg-inline icon--rss" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

        </a>
        
      </li>
    </ul>
  </nav>
</div>

  </header>

  

  



  <main id="main" class="main pico container">
    <div class="content-wrapper">
  <aside class="sidebar">
  </aside>
  <div id="content" class="content">
    <article class="post">
      
      <header class="post-header">
        <h1 class="post-title">Mediapipe Pose Detection: Flutter Library</h1>
        



        <div class="post-meta-list">
  <div class="post-meta-item post-meta-author">
    
<svg aria-hidden="true" class="lucide lucide-user-round-pen hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 21a8 8 0 0 1 10.821-7.487"/><path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/><circle cx="10" cy="8" r="5"/></svg>
    <a href="/about">
      <span class="post-meta-author-name">
        William Parker
      </span>
    </a>
    
  </div>

  <div class="post-meta-item post-meta-time">
    
<svg aria-hidden="true" class="lucide lucide-calendar-days hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
    <time datetime=" 2024-03-10">
      Mar 10 2024
    </time>


    
    <span class="post-meta-item post-meta-lastmod">
      (Modified:
      Feb 19 2025)
    </span>
    

  </div>


  <div class="post-meta__right">
    

    <div class="post-meta-item post-meta-category">
      
        
          
        <a href="http://localhost:1313/categories/software-libraries/">software-libraries</a>
    </div>


    
    


    
    
  </div>
</div>

      </header>

      
      <div class="post-content">
        <p><em>A Flutter library for pose detection using Google&rsquo;s Mediapipe.</em></p>
<h2 id="introduction">Introduction</h2>
<p>Before 2023, Google&rsquo;s solution for machine learning (ML) on mobile was
<a href="https://developers.google.com/ml-kit/">ML Kit</a>. The library was for Android and iOS
and had a variety of small models to perform common tasks that developers could use for
their apps. This was before LLMs took over the public mind, so the platform heavily focused
on computer vision for tasks like facial detection and image labeling.
The library was well received by many developers and the developer community was even
interested enough in the library that it was ported to Flutter for
iOS and Android as <a href="https://pub.dev/packages/google_ml_kit">google_ml_kit</a>.</p>
<p>In 2023, Google re-introduced their on-device ML models under the upgraded
<a href="https://developers.googleblog.com/en/introducing-mediapipe-solutions-for-on-device-machine-learning/">Mediapipe Solutions</a>
branding. They made this change as the library supported mobile as well as web and Python,
and they overhauled several models and took them out of beta. It appeared that Google
updated <a href="https://ai.google.dev/edge/mediapipe/solutions/vision/pose_landmarker">pose detection</a>
as well, which was the model I used for FreeMoveVR. I tested out their
<a href="https://github.com/google-ai-edge/mediapipe-samples/tree/main/examples/pose_landmarker/android">Android app example</a>,
and it felt much smoother than what I was able to achieve in my Flutter application.
The points looked less jittery and it was running at 30 fps, rather than my Flutter
app at 24 fps. I decided I wanted to re-implement google_ml_kit using Mediapipe
instead to try to improve my app.</p>
<h2 id="data-pipeline">Data Pipeline</h2>
<p>As Flutter is an abstracted layer on top of the native platform, we need a special way to
pass data between these, which is normally done through platform (aka method) channels.
Anytime a developer needs to interact with native APIs, it needs to take multiple steps: Flutter →
methodChannel → platform host → app delegate → Flutter controller → native API, and
back to return the data. The data is always passed asynchronously.</p>
<p>Here is the image used to explain how this is done from
<a href="https://docs.flutter.dev/platform-integration/platform-channels">Flutter&rsquo;s website</a>:</p>

<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box" style="display: flex; justify-content: center; align-items: center;">
<figure  class="bordered-image"  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" >
    <div class="img">
      <img itemprop="thumbnail" src="/software-libraries/google-mediapipe-pose-detection/PlatformChannels.png" alt="Architectural overview: platform channels"/>
    </div>
    <a href="/software-libraries/google-mediapipe-pose-detection/PlatformChannels.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Architectural overview: platform channels</p>
      </figcaption>
  </figure>
</div>

<h3 id="data-throughput-in-m_ble_peripheral">Data Throughput in m_ble_peripheral</h3>
<p>I had previous experience with making a Flutter library in
<a href="/post/software-libraries/m-ble-peripheral/">m_ble_peripheral</a>, but this library
was significantly different due to the quantity of data that needed to constantly
be transferred between the main application and the native code through the library.</p>
<p>In Bluetooth Low Energy (BLE), the size of the data transferred are measured in bytes.
The messages sent to and from the app are only 20 bytes at max. The actual messages
are a bit more, but that is BLE headers handled by the operating system and not viewable
to the end application. There can be hundreds of messages sent a second, but that is
still almost nothing.</p>
<p>The platform channels also have a limited number of supported data types. It&rsquo;s mostly just
your standard data types in addition to <code>null</code>, some <code>List</code>s and <code>Map</code>. This is really easy to
work with for m_ble_peripheral because one of the types is a <code>Uint8List</code> that can easily
represent notification data and UUIDs can be <code>String</code>s.</p>
<p>Unlike m_ble_peripheral, this library would be pushing the limits on what Flutter
and Mediapipe could handle real time. This was because of two factors: multiple
platform jumps with complex data type augmentation and Mediapipe&rsquo;s model execution time.</p>
<h3 id="data-throughput-for-mediapipe">Data Throughput for Mediapipe</h3>
<p>As we just discussed, there is a pipeline every time we need to transfer data,
and there is a limited number of data types we can pass through. This creates
a problem for video streams. Video streams contain lots of data, and need high
throughput. If we are operating at 30 fps, we have less than 0.033 seconds to
process data and get a result before the next frame is expected to come in. I
say less than because frames may not be captured at exactly the same rate,
especially if the phone is doing a lot of processing like it would be when
running the pose detection model.</p>
<h4 id="framerate-on-android">Framerate on Android</h4>
<p>While debugging, I found an even greater disconnect with this intuition.
While iOS can run 30 fps, I could not find any phone model on Android that
ran 30 fps. Back when I was starting the app in the fall of 2022, I took a
survey and ran FreeMoveVR on several of my friend&rsquo;s phones:</p>
<table>
  <thead>
      <tr>
          <th>Phone</th>
          <th>Year</th>
          <th>Avg. FPS</th>
          <th>Version</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Moto g6</td>
          <td>2018</td>
          <td>9.0</td>
          <td>9</td>
      </tr>
      <tr>
          <td>Pixel XL</td>
          <td>2018</td>
          <td>7.4</td>
          <td>10</td>
      </tr>
      <tr>
          <td>OnePlus 7T Pro 5G</td>
          <td>2019</td>
          <td>17.0</td>
          <td>11</td>
      </tr>
      <tr>
          <td>Samsung Gal S21 Ultra</td>
          <td>2021</td>
          <td>22.8</td>
          <td>?</td>
      </tr>
      <tr>
          <td>Samsung Gal 10</td>
          <td>2019</td>
          <td>16.4</td>
          <td>?</td>
      </tr>
      <tr>
          <td>Samsung Gal 10+</td>
          <td>2019</td>
          <td>15.3</td>
          <td>?</td>
      </tr>
      <tr>
          <td>Samsung Gal S21</td>
          <td>2021</td>
          <td>23.9</td>
          <td>12</td>
      </tr>
      <tr>
          <td>Google Pixel 4a 5G</td>
          <td>2020</td>
          <td>23.5</td>
          <td>12</td>
      </tr>
  </tbody>
</table>
<p>As you can see, no model was capable of running at over 24 frames per second.
While the average phone has increased in capabilities, any phone is able to
normally record a 30 fps video. This led me to the internal code of Flutter&rsquo;s
<a href="https://pub.dev/packages/camera">camera plugin</a>. This is the standard camera
plugin for Flutter, made by the Flutter development team. During my time
developing, the camera plugin in the backend used the outdated
<a href="https://pub.dev/packages/camera_android">Camera 2 library</a> for Android.
With their solution, the frames that are meant to be viewed and the data as
it exists to be sent for further processing are not equivalent. While the
real framerate of the camera might be a full 30 fps, and the user sees 30 fps
when doing a visual test, some frames are dropped when sending to the callback
function I use to process the image. Because of this, I was never able to see
above 24 fps in testing on Android. While this made my goal of 30 fps in this
library impossible without significantly changing Flutter&rsquo;s code, I decided to
continue to work on this library to use the improved model and framework.</p>
<h4 id="processing-images">Processing Images</h4>
<p>Let&rsquo;s now return to thinking about platform channels. When my Flutter app needs
to process the camera image, it needs to take many steps before it is sent to
Mediapipe. The camera library runs Android&rsquo;s native Camera library, Camera 2,
Camera 2 returns the camera as a viewable image and a version that is made for
processing, Both of these formats then need to be converted into a valid data
type to be transferred over the platform channel, the Flutter Camera library
then needs to re-create those images, One copy is displayed on the screen and
the other is sent to my callback. The callback now needs to perform that process
again in reverse to go from the Flutter side of my library to the respective
platform&rsquo;s native side. Then, Mediapipe does not natively support the image type
that Android produces when streaming in preview mode, so we need to convert
the YUV image to Bitmap. It is actually really hard to go from YUV directly to
Bitmap, so actually we need to first convert from YUV to JPEG, then JPEG to
Bitmap. Once it is in the correct image format, then we can finally send the
image through Mediapipe to get our pose data.</p>
<p>While this is a complex process, it is no ware near deal breaking for our
solution. From what I remember, once the image was captured by Camera 2,
all of this could be done in less then 2 milliseconds, or 0.002 seconds
at 240p. The main bottleneck was due to converting between image formats at the end.</p>
<blockquote>
<p>Side note: 240p sounds low, but low qualities like this are actually normal input for
pose detection models as higher qualities take longer for the model to process.
All of Google&rsquo;s pose detection models have 224 x 224-pixel input.
Additionally, for pose recognition, the person normally takes up a large
portion of the image and is in an unambitious position, so the model
would likely only improve slightly but take exponentially longer for larger
inputs.</p></blockquote>
<h2 id="running-the-mediapipe-model">Running the Mediapipe Model</h2>
<p>After all this research and work, interacting with Mediapipe was relatively easy.
I added a builder to set up the <code>PoseLandmarker</code> object, which only needs a few
enum values. We can then pass through our image data, and the model runs
asynchronously. When the model is done, we can send the result to
<code>EventChannel.EventSink</code>, where my library and app are listening for updates.
Mediapipe simply has a <code>setResultListener</code>, and from there we format the
data in the same way as <code>google_ml_kit</code> to maintain compatibility for users.</p>
<p>This is the first time I had a memory leak in my software, so I needed to learn how
to debug that. Xcode has a tool to find memory leaks that I was able to pretty quickly
understand and use. I ended up finding the cause of it in my register function. I had it end
by kicking off a <code>DispatchQueue</code> that would infinity run so it could detect the image as soon
as possible. While this does not look good, in my defense, I was still new to Swift so I
based the code on my Android implementation, where running the function in a separate
thread is a valid solution. Instead, I had the detect function run via <code>DispatchQueue</code>
only after we had a result. From what I remember, I tried to mirror this on the Android
side but it would not work, and doing it as I described in a thread was the best solution.</p>
<p>Now we could ask the question of which model should be used when for Mediapipe Pose
detection. Mediapipe has three models, Lite, Full, and Heavy. For my Flutter library,
all three are available of course, as it is as simple as downloading the model and
changing an enum in the builder. From my personal experience, the Lite
model is almost unusable. It is a surefire way to hit max framerate, but it was
struggling to accurately detect my legs and arms even in optimal conditions when
I was standing still. I&rsquo;m honestly not sure what the use case even is with this quality.
Heavy is quite good, but the issue is that it would never come
close to a usable framerate for my application. I am sure it is very useful for images
and apps that do not require a real-time response, but I could use it for FreeMoveVR.
The Full model is perfect for any live feed application.
It balances quality and speed very well for modern phones, often getting near full
fps on 2020 and newer.</p>
<h2 id="retrospective">Retrospective</h2>
<p>I am pretty happy with how the library turned out. The only improvement I think I would
make looking back was setting up <a href="https://github.com/dependabot/dependabot-core">Dependabot</a>
so my library could update automatically. Other then that, I happily use the library for
my own projects. I felt like this was a significancy more serious library for Flutter
then when I built <code>m_ble_peripheral</code>. Even if it is not that complex, deigning and
implementing a need I had in this way significantly helped my understanding of Flutter
and library development as a whole.</p>
<p>The code is available at: <a href="https://github.com/FreeMove-VR/google_mediapipe_pose_detection/tree/main">https://github.com/FreeMove-VR/google_mediapipe_pose_detection/tree/main</a></p>

      </div>

      
      
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">William Parker</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">Modified</span>
    <span class="item-content">
      Feb 19 2025
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a></span>
  </p>
</div>



      
      


      <footer class="post-footer">
        <div class="post-tags">
          <a href="http://localhost:1313/tags/kotlin/">Kotlin</a>
          <a href="http://localhost:1313/tags/swift/">Swift</a>
          <a href="http://localhost:1313/tags/ios/">iOS</a>
          <a href="http://localhost:1313/tags/android/">Android</a>
          <a href="http://localhost:1313/tags/flutter/">Flutter</a>
          <a href="http://localhost:1313/tags/mobile/">Mobile</a>
          <a href="http://localhost:1313/tags/library/">Library</a>
          <a href="http://localhost:1313/tags/pose-detection/">Pose Detection</a>
          <a href="http://localhost:1313/tags/mediapipe/">Mediapipe</a>
          
        </div>


        
        <nav class="post-nav">
          
          <a class="prev" href="/post/ai-projects/flight-sure/">
            
            <i class="iconfont">
              
<svg aria-hidden="true" class="lucide lucide-chevron-left hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m15 18-6-6 6-6"/></svg>
            </i>
            <span class="prev-text nav-default">FlightSure</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
          
          <a class="next" href="/post/software-libraries/m-ble-peripheral/">
            <span class="next-text nav-default">Peripheral BLE Library for Flutter</span>
            <span class="prev-text nav-mobile">Next</span>
            
            <i class="iconfont">
              
<svg aria-hidden="true" class="lucide lucide-chevron-right hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m9 18 6-6-6-6"/></svg>
            </i>
          </a>
        </nav>
      </footer>
    </article>

    
    


    
    

  

  
  

  
  

  

  

    

  

  


  </div>

  
  <nav class="toc" id="toc">
    <div class="toc-title">Table of Contents</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#data-pipeline">Data Pipeline</a>
      <ul>
        <li><a href="#data-throughput-in-m_ble_peripheral">Data Throughput in m_ble_peripheral</a></li>
        <li><a href="#data-throughput-for-mediapipe">Data Throughput for Mediapipe</a></li>
      </ul>
    </li>
    <li><a href="#running-the-mediapipe-model">Running the Mediapipe Model</a></li>
    <li><a href="#retrospective">Retrospective</a></li>
  </ul>
</nav>
    </div>
  </nav>


</div>
  </main>

  <footer id="footer" class="site-footer">
    <div class="social-icon-links">
  


<a href="mailto:wiparker2020@gmail.com" rel="me noopener" class="social-icon-link" title="email" >
  
<svg aria-hidden="true" class="icon hi-svg-inline" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1451 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

</a>
<a href="https://www.linkedin.com/in/william-parker-7b43a221b/" rel="me noopener" class="social-icon-link" title="linkedin"  target="_blank" >
  
<svg aria-hidden="true" class="icon hi-svg-inline" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M872.405333 872.618667h-151.637333v-237.610667c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333 0-91.136 61.653333-91.136 125.397334v241.792H398.976V384h145.664v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667 0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667 0 0 1-88.021333-88.106666 88.064 88.064 0 1 1 88.021333 88.106666z m76.032 555.477334H151.68V384h152.064v488.618667zM948.266667 0H75.562667C33.792 0 0 33.024 0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667 0 948.138667 0h0.128z"></path>
</svg>

</a>
<a href="https://github.com/Jaspann" rel="me noopener" class="social-icon-link" title="github"  target="_blank" >
  
<svg aria-hidden="true" class="icon hi-svg-inline" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

</a>
<a href="https://www.instagram.com/williampar20/" rel="me noopener" class="social-icon-link" title="instagram"  target="_blank" >
  
<svg aria-hidden="true" class="icon hi-svg-inline" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M853.333333 277.333333C853.333333 289.28 843.946667 298.666667 832 298.666667L746.666667 298.666667C734.72 298.666667 725.333333 289.28 725.333333 277.333333L725.333333 192C725.333333 180.053333 734.72 170.666667 746.666667 170.666667L832 170.666667C843.946667 170.666667 853.333333 180.053333 853.333333 192M192 853.333333C180.053333 853.333333 170.666667 843.946667 170.666667 832L170.666667 469.333333 259.84 469.333333C257.28 482.986667 256 497.493333 256 512 256 653.226667 370.773333 768 512 768 653.226667 768 768 653.226667 768 512 768 497.493333 766.293333 482.986667 764.16 469.333333L853.333333 469.333333 853.333333 832C853.333333 843.946667 843.946667 853.333333 832 853.333333M512 341.333333C606.293333 341.333333 682.666667 417.706667 682.666667 512 682.666667 606.293333 606.293333 682.666667 512 682.666667 417.706667 682.666667 341.333333 606.293333 341.333333 512 341.333333 417.706667 417.706667 341.333333 512 341.333333M853.333333 85.333333 170.666667 85.333333C123.306667 85.333333 85.333333 123.306667 85.333333 170.666667L85.333333 853.333333C85.333333 900.266667 123.733333 938.666667 170.666667 938.666667L853.333333 938.666667C900.266667 938.666667 938.666667 900.266667 938.666667 853.333333L938.666667 170.666667C938.666667 123.306667 900.266667 85.333333 853.333333 85.333333Z"></path>
</svg>

</a>


<a href="http://localhost:1313/index.xml" rel="noopener alternate" type="application/rss&#43;xml" class="social-icon-link" title="rss"
  target="_blank">
  
<svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
</a>

</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
     -
    2025
    <span class="heart">
      
      <i class="iconfont">
        
<svg aria-hidden="true" class="lucide lucide-heart hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
      </i>
    </span><span class="author">
      William Parker
      
    </span></span>

  
  

  
</div>

  </footer>

  




<script type="text/javascript" src="/js/main.260ce801c4a750c68349dae28033cc959f429853533804a97759b4f108117633.js" integrity="sha256-JgzoAcSnUMaDSdrigDPMlZ9CmFNTOASpd1m08QgRdjM=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  

















</body>

</html>
